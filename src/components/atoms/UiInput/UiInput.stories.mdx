import { Meta, Canvas, Story, Props, ArgsTable } from '@storybook/addon-docs/blocks';
import UiInput from './UiInput.vue';

<Meta
  title="Atoms/Input"
  component={UiInput}
  argTypes={{
    disabled: {control: {type: 'boolean'}},
    suffix: {control: {type: 'text'}},
    placeholder: {control: {type: 'text'}},
    type: {control: {type: 'select', options: ['text', 'number', 'email', 'search', 'tel', 'url', 'password']}},
    cssClass: {control: {type: 'inline-check', options: {
      'is-invalid': 'is-invalid',
    }}},
  }}
/>

# Input

This component should support native attributes. [MDN web docs](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input)

<Canvas>
  <Story
    name="Common"
    args={{
      suffix: '',
      placeholder: 'Search, e.g. headache',
      type: 'text',
    }}
  >
    {((args, {argTypes}) => ({
      props: Object.keys(argTypes).filter((key) => (key !== 'value')),
      components: { UiInput },
      data() {
        return {
          value: '',
        }
      },
      template: `<UiInput
        v-model="value"
        :suffix="suffix"
        :type="type"
        :disabled="disabled"
        :placeholder="placeholder"
        :class="cssClass"
        style="width:400px"
      />`
    })).bind({})}
  </Story>
</Canvas>

<ArgsTable story='Common' />

Use `suffix` props to set text suffix

<Canvas>
  <Story
    name="Input with text suffix"
  >
    {((args, {argTypes}) => ({
      components: { UiInput },
      data() {
        return {
          value: '',
        }
      },
      template: `<UiInput
        v-model="value"
        suffix="cm"
        type="text"
        placeholder="Search, e.g. headache"
        style="width:400px"
      />`
    })).bind({})}
  </Story>
</Canvas>

Use `aside` slot to replace aside template

<Canvas>
  <Story
    name="Input with icon suffix"
  >
    {((args, {argTypes}) => ({
      components: { UiInput },
      data() {
        return {
          value: '',
        }
      },
      template: `<UiInput
        v-model="value"
        placeholder="Search, e.g. headache"
        style="width:400px"
      >
        <template #aside="{ isEmpty }">
          <template v-if="isEmpty">
            <svg
              class="ui-input__aside"
              style="width: 12px; height: 12px; fill: #abb8c4"
              viewBox="0 0 124.524 124.524"
            >
              <path d="M51 102.05c10.5 0 20.2-3.2 28.3-8.6l29.3 29.3c2.301 2.3 6.101 2.3 8.5 0l5.7-5.7c2.3-2.3 2.3-6.1 0-8.5l-29.4-29.2c5.399-8.1 8.6-17.8 8.6-28.3 0-28.1-22.9-51-51-51s-51 22.9-51 51c0 28.099 22.8 51 51 51zm0-82c17.1 0 31 13.9 31 31s-13.9 31-31 31-31-13.9-31-31 13.9-31 31-31z"/>
            </svg>
          </template>
          <template v-else>
            <!-- todo: use button for clickable elements -->
            <svg
              class="ui-input__aside"
              style="width: 12px; height: 12px; fill: #abb8c4; cursor: pointer"
              viewBox="0 0 512.001 512.001"
              @click="clear"
            >
              <path d="M512.001 84.853L427.148 0 256.001 171.147 84.853 0 0 84.853 171.148 256 0 427.148l84.853 84.853 171.148-171.147 171.147 171.147 84.853-84.853L340.853 256z"/>
            </svg>
          </template>
        </template>
      </UiInput>`,
      methods: {
        clear(){
          this.value = '';
        }
      }
    })).bind({})}
  </Story>
</Canvas>

# Props

<Props of={UiInput} />

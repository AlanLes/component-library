import { Meta, Canvas, Story, Props, ArgsTable } from '@storybook/addon-docs/blocks';
import UiInput from './UiInput.vue';
import UiIcon from '../UiIcon/UiIcon.vue';

<Meta
  title="Atoms/Input"
  component={UiInput}
  argTypes={{
    disabled: {control: {type: 'boolean'}},
    suffix: {control: {type: 'text'}},
    placeholder: {control: {type: 'text'}},
    type: {control: {type: 'select', options: ['text', 'number', 'email', 'search', 'tel', 'url', 'password']}},
    cssClass: {control: {type: 'inline-check', options: {
      'is-invalid': 'is-invalid',
    }}},
  }}
/>

# Input

This component should support native attributes. [MDN web docs](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input)

<Canvas>
  <Story
    name="Common"
    args={{
      suffix: '',
      placeholder: 'Search, e.g. headache',
      type: 'text',
    }}
  >
    {((args, {argTypes}) => ({
      props: Object.keys(argTypes).filter((key) => (key !== 'value')),
      components: { UiInput },
      data() {
        return {
          value: '',
        }
      },
      template: `<UiInput
        v-model="value"
        :suffix="suffix"
        :type="type"
        :disabled="disabled"
        :placeholder="placeholder"
        :class="cssClass"
        style="width:400px"
      />`
    })).bind({})}
  </Story>
</Canvas>

<ArgsTable story='Common' />

Use `suffix` props to set text suffix

<Canvas>
  <Story
    name="Input with text suffix"
  >
    {((args, {argTypes}) => ({
      components: { UiInput },
      data() {
        return {
          value: '',
        }
      },
      template: `<UiInput
        v-model="value"
        suffix="cm"
        type="text"
        placeholder="Search, e.g. headache"
        style="width:400px"
      />`
    })).bind({})}
  </Story>
</Canvas>

Use `aside` slot to replace aside template

<Canvas>
  <Story
    name="Input with icon suffix"
  >
    {((args, {argTypes}) => ({
      components: { UiInput, UiIcon },
      data() {
        return {
          value: '',
        }
      },
      template: `<UiInput
        v-model="value"
        placeholder="Search, e.g. headache"
        style="width:400px"
      >
        <template #aside="{ isEmpty }">
          <template v-if="isEmpty">
            <UiIcon
              class="ui-input__aside"
              icon="search"
              style="--icon-size: 12px; --icon-color: #abb8c4; cursor: pointer"
            />
          </template>
          <template v-else>
            <!-- TODO: use UiButton for clickable elements -->
            <UiIcon
              class="ui-input__aside"
              style="--icon-size: 12px; --icon-color: #abb8c4; cursor: pointer"
              icon="close"
              @click="clear"
            />
          </template>
        </template>
      </UiInput>`,
      methods: {
        clear(){
          this.value = '';
        }
      }
    })).bind({})}
  </Story>
</Canvas>

# Props

<Props of={UiInput} />

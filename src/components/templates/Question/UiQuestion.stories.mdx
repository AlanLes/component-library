import {
  Meta, Canvas, Story, Props, ArgsTable,
} from '@storybook/addon-docs/blocks';
import UiQuestion from './UiQuestion.vue';
import UiMultipleChoices from '../../organisms/UiMultipleChoices/UiMultipleChoices.vue';
import UiMultipleAnswer from '../../organisms/UiMultipleAnswer/UiMultipleAnswer.vue';
import UiControls from '../../organisms/UiControls/UiControls.vue';

<Meta
  title="Templates/Question"
  component={UiQuestion}
  argTypes={{
    title: { control: { type: 'text' } },
    hint: { control: { type: 'text' } },
    invalid: { control: { type: 'boolean' } },
    translation: { control: { type: 'object' } },
  }}
/>

# Question

<Canvas>
  <Story
    name="Common multiple choice"
    args={{
      title: 'What is your superpower?',
      hint: 'Select one answer.',
      invalid: true,
      touched: true,
      translation: {
        info: 'What does it mean?',
        why: 'Why am I being asked this?',
        issue: 'Report an issues with this UiQuestion',
      },
      options: {
        info: true,
        why: true,
        issue: true,
      },
    }}
  >
    {((args, { argTypes }) => ({
      props: Object.keys(argTypes),
      components: { UiQuestion, UiMultipleChoices },
      data() {
        return {
          evidences: [],
          choices: [
            {
              id: 6,
              name: 'I have diabetes',
              linked_observation: 'p_8',
            },
            {
              id: 5,
              name: 'I have hypertension',
              linked_observation: 'p_9',
            },
            {
              id: 4,
              name: 'I have high cholesterol',
              linked_observation: 'p_10',
            },
          ],
        };
      },
      template: `<UiQuestion
        :title="title"
        :invalid="invalid"
        :translation="translation"
        :options="options"
        style="max-width: 780px; min-height: 465px"
      >
        <UiMultipleChoices
          v-model="evidences"
          v-model:invalid="invalid"
          :touched="touched"
          :hint="hint"
          :choices="choices"
        />
      </UiQuestion>`,
    })).bind({})}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="Common multiple answer"
    args={{
      title: 'What is your superpower?',
      hint: 'Select one answer.',
      invalid: true,
      touched: true,
      translation: {
        info: 'What does it mean?',
        why: 'Why am I being asked this?',
        issue: 'Report an issues with this UiQuestion',
      },
      options: {
        info: true,
        why: true,
        issue: true,
      },
    }}
  >
    {((args, { argTypes }) => ({
      props: Object.keys(argTypes),
      components: { UiQuestion, UiMultipleAnswer },
      data() {
        return {
          evidence: [],
          name: 'checkboxes',
          choices: [
            {
              name: 'I have diabetes',
              id: 'p_8',
            },
            {
              name: 'I have hypertension',
              id: 'p_9',
            },
            {
              name: 'I have high cholesterol',
              id: 'p_10',
            },
            {
              name: 'I\'m pregnant',
              id: 'p_42',
            },
            {
              name: 'I\'m postmenopausal',
              id: 'p_11',
            },
            {
              name: 'I\'m overweight or obese or very very fat',
              id: 'p_7',
            },
            {
              name: 'I smoke cigarettes',
              id: 'p_28',
            },
          ],
        };
      },
      template: `<UiQuestion
        :title="title"
        :invalid="invalid"
        :translation="translation"
        :options="options"
        style="max-width: 780px; min-height: 465px"
      >
        <UiMultipleAnswer
          :name="name"
          v-model="evidence"
          :invalid="invalid"
          :hint="hint"
          :touched="touched"
          :choices="choices"
          source="initial"
        />
      </UiQuestion>`,
    })).bind({})}
  </Story>
</Canvas>

with Controls

<Canvas>
  <Story
    name="[example] with Controls"
    args={{
      title: 'What is your superpower?',
      hint: 'Select one answer.',
      invalid: true,
      touched: true,
      translation: {
        info: 'What does it mean?',
        why: 'Why am I being asked this?',
        issue: 'Report an issues with this UiQuestion',
      },
      options: {
        info: true,
        why: true,
        issue: true,
      },
    }}
  >
    {((args, { argTypes }) => ({
      props: Object.keys(argTypes),
      components: { UiQuestion, UiMultipleChoices, UiControls },
      data() {
        return {
          evidences: [],
          choices: [
            {
              id: 6,
              name: 'I have diabetes',
              linked_observation: 'p_8',
            },
            {
              id: 5,
              name: 'I have hypertension',
              linked_observation: 'p_9',
            },
            {
              id: 4,
              name: 'I have high cholesterol',
              linked_observation: 'p_10',
            },
          ],
        };
      },
      template: `
        <UiControls
          style="max-width: 780px; min-height: 540px"
          toBack="/3-3"
          toNext="/5-4"
        >
          <UiQuestion
            :title="title"
            :invalid="invalid"
            :translation="translation"
            :options="options"
            style="flex: 1"
          >
            <UiMultipleChoices
              v-model="evidences"
              v-model:invalid="invalid"
              :touched="touched"
              :hint="hint"
              :choices="choices"
            />
          </UiQuestion>
      </UiControls>`,
    })).bind({})}
  </Story>
</Canvas>

# Props

<Props of={UiQuestion} />

import {
  Meta, Canvas, Story, Props, ArgsTable,
} from '@storybook/addon-docs/blocks';
import UiLoader from './UiLoader.vue';
import UiControls from '../../organisms/UiControls/UiControls.vue'
import UiButton from '../../atoms/UiButton/UiButton.vue'

<Meta
  title="Molecules/Loader"
  component={UiLoader}
  argTypes={{
    isLoading: { control: { type: 'boolean' } },
  }}
/>

# Spinner

<Canvas>
  <Story
    name="Spinner common"
    args={{
      isLoading: true,
      loaderAttrs: {
        label: 'Analyzing your answers...',
      },
    }}
  >
    {((args, { argTypes }) => ({
      props: Object.keys(argTypes),
      components: { UiLoader, UiControls },
      template: `
        <UiControls
          style="max-width: 780px; min-height: 540px"
          toBack="/3-3"
          toNext="/5-4"
          :isAnswerAbove="true"
        >
          <div style="position: relative; flex: 1; display: flex">
            <UiLoader
              type="spinner"
              :is-loading="isLoading"
              :loaderAttrs="loaderAttrs"
              style="position: absolute; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; "
            >
              I am loaded!
            </UiLoader>
          </div>
        </UiControls>
      `,
    })).bind({})}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="Spinner on dark"
    args={{
      isLoading: true,
      loaderAttrs: {
        class: 'ui-loader-spinner--on-dark',
      },
    }}
    parameters={{
      layout: 'full',
    }}
  >
    {((args, { argTypes }) => ({
      props: Object.keys(argTypes),
      components: { UiLoader },
      template: `
        <UiLoader
          :loaderAttrs="loaderAttrs"
          type="spinner"
          style="position: absolute; z-index: 1; display: flex; align-items: center; justify-content: center; width: 100%;height: 100%; background: var(--color-blue-600); margin: -8px;"
          :is-loading="isLoading"
        />
      `,
    })).bind({})}
  </Story>
</Canvas>

# Skeleton

<Canvas>
  <Story
    name="Skeleton question"
    args={{
      isLoading: true,
    }}
  >
    {((args, { argTypes }) => ({
      props: Object.keys(argTypes),
      components: { UiLoader, UiControls },
      template: `
        <UiControls
          style="
            max-width: 780px; min-height: 540px;
            --controls-container-padding: 44px 20px 0 20px;
            --controls-container-tablet-padding: 76px 96px 0 76px;
          "
          toBack="/3-3"
          toNext="/5-4"
          :isAnswerAbove="true"
        >
          <div style="position: relative; flex: 1">
          <UiLoader
            type="skeleton"
            :is-loading="isLoading"
            style="position: absolute; width: 100%; height: 100%;"
          >
            <template #loader-blocks>
              <div
                class="ui-loader-skeleton__block"
              />
              <div
                class="ui-loader-skeleton__block"
                style="width: 75%;"
               />
              <div class="ui-loader-skeleton__block ui-loader-skeleton__block--large" />
            </template>
            I am loaded!
          </UiLoader>
</div>
        </UiControls>
      `,
    })).bind({})}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="Ellipsis visual hidden"
    args={{
      isLoading: true,
    }}
  >
    {((args, { argTypes }) => ({
      props: Object.keys(argTypes),
      components: { UiLoader, UiButton },
      template: `
        <UiButton>
          <UiLoader
          type="ellipsis"
          :is-loading="isLoading"
          style="position: absolute"
          />
          <span :style="{ opacity: isLoading ? 0 : 1 }">I am loaded</span>
        </UiButton>
      `,
    })).bind({})}
  </Story>
</Canvas>

<ArgsTable story='Common' />

# Props

<Props of={UiLoader} />

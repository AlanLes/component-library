import { Meta } from '@storybook/addon-docs';
import { PageOutline } from '../components/PageOutline';

<Meta title="Getting Started/Development Guide/Working with breakpoints"/>

# Working with breakpoints
We want to make sure that our components work well on all devices. Than we use breakpoints to make sure that our components are responsive.
Symptom Checker UI Kit has a predefined breakpoints but it is possible to define your own breakpoints.

<PageOutline/>

## Predefined breakpoints
Predefined breakpoints in Symptom Checker UI Kit are:

```scss
$mobile-max-width: 767px;
$tablet-min-width: 768px;
$tablet-max-width: 991px;
$desktop-min-width: 992px;
```

## How to change breakpoints
To change predefined breakpoints you can use Webpack and [string-replace-loader](https://www.npmjs.com/package/string-replace-loader).
When you use Vue CLI you can use fallowing code:

```js
//vue.config.js
module.exports = {
  chainWebpack: config => {
    const scssRule = config.module.rule('scss');
    scssRule
    .onOf('normal')
    .use('string-replace-loader')
    .loader('string-replace-loader')
    .options({
      search: '@import "../variables/breakpoints";',
      replace: '@import "../../../../../../_breakpoints.scss";', // _breakpoints.scss in root directory
      flags: 'g'
    })
  }
}
```

## Mixins
To use breakpoints you can use the following mixins:

```scss
@mixin from($width) {
  @media (min-width: $width) {
    @content;
  }
}

@mixin to($width) {
  @media (max-width: $width) {
    @content;
  }
}

@mixin between($min, $max) {
  @media (min-width: $min) and (max-width: $max) {
    @content;
  }
}

@mixin to-mobile {
  @include to($mobile-max-width) {
    @content;
  }
}

@mixin from-tablet {
  @include from($tablet-min-width) {
    @content;
  }
}

@mixin from-desktop {
  @include from($desktop-min-width) {
    @content;
  }
}
```

To use breakpoints mixins you should import them in your stylesheet:

```scss
@import "@symptom-checker/src/styles/mixins/breakpoints";
```

## SASS variables with JavaScript code
A huge problem in breakpoints is a possibility of using SASS variables in JavaScript code.
It's important to keep consistency between SASS and JavaScript breakpoints.

In Symptom Checker UI Kit we solve this problem and export breakpoints and media queries. i.e.

```js
import breakpoints from "@symptom-checker/src/styles/exports/breakpoints.scss";
// or
import { toMobile } from "@symptom-checker/src/styles/exports/breakpoints.scss";

const isMobile = matchMedia(toMobile).matches;
```

### Exported breakpoints

```js
mobileMaxWidth: $mobile-max-width;
tabletMinWidth: $tablet-min-width;
tabletMaxWidth: $tablet-max-width;
desktopMinWidth: $desktop-min-width;
toMobile: '(max-width: #{$mobile-max-width})';
toTablet: '(max-width: #{$tablet-max-width})';
fromTablet: '(min-width: #{$tablet-min-width})';
fromDesktop: '(min-width: #{$desktop-min-width})';
```

Special thanks to @Matteo Fogli and his article [How to share SASS variables with JavaScript code in VueJS](https://dev.to/pecus/how-to-share-sass-variables-with-javascript-code-in-vuejs-55p3).

### Troubleshooting
SASS variables with JavaScript code use CSS modules and it can be a problem. To solve it you can use fallowing code:

```js
//vue.config.js
module.exports = {
  css: {
    loaderOptions: {
      css: {
        modules: {
          auto: /exports/ // enable CSS module for files from exports directory
        }
      }
  },
  },
}
```

